{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'css/doctor_dash.css' %}">
</head>
<body>

<!-- ===== NAVBAR ===== -->
<nav class="doctor-navbar">
    <div class="nav-left">
        <div class="nav-logo">
            <span class="pulse">~</span>
            <span class="medical">Medical</span>
            <span class="clinic">Clinic</span>
        </div>
        <div class="nav-subtitle">Exams & Diagnostics</div>
    </div>
    <ul class="nav-links">
        <li><a href="?page=appointments">Appointments</a></li>
        <li><a href="?page=calls">Call Requests</a></li>
        <li><a href="?page=prescriptions">Prescription Queries</a></li>
        <li><a href="?page=emergency">Emergency</a></li>
    </ul>

    <div class="nav-actions">
        
        <a href="{% url 'admin_logout' %}">Logout</a>
        <a href="?page=notifications">ðŸ””</a>

    </div>
</nav>

<div class="doctor-wrapper">

    <!-- ===== LEFT SIDEBAR ===== -->
    <aside class="left-sidebar">
        <a href="?page=home">Dashboard</a>
        <a href="?page=patients">My Patients</a>
        <a href="?page=messages">Messages</a>
    </aside>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="doctor-content">

        <!-- MESSAGES -->
        {% if messages %}
        <div class="flash-messages" id="flash-messages">
            {% for message in messages %}
            <div class="msg {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}

 {% if not doctor.is_profile_completed %}

<div class="form-card">
    <h2 class="dashboard-title">Complete Your Profile</h2>

    <form class="doctor-form" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <textarea name="bio" placeholder="Professional Bio"></textarea>
        <input type="text" name="qualification" placeholder="Qualification">
        <input type="text" name="hobbies" placeholder="Hobbies">
        <input type="file" name="image">
        <button type="submit">Save Profile</button>
    </form>
</div>


{% else %}
   
        {% if page == "home" %}
            <h2>Welcome Dr. {{ doctor.name }}</h2>
            <p>Specialization: {{ doctor.specialization }}</p>
        {% endif %}

        {% if page == "appointments" %}
            <h2>Appointments</h2>
        {% endif %}

        {% if page == "prescriptions" %}
            <h2>Prescription Queries</h2>
        {% endif %}

        {% if page == "edit_profile" %}

<div class="form-card">
    <h2 class="dashboard-title">Edit Profile</h2>

    <form class="doctor-form" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <textarea name="bio">{{ doctor.bio }}</textarea>
        <input type="text" name="qualification" value="{{ doctor.qualification }}">
        <input type="text" name="hobbies" value="{{ doctor.hobbies }}">
        <input type="file" name="image">
        <button type="submit">Update Profile</button>
    </form>
</div>


{% endif %}

{% if page == "notifications" %}
<h2>Notifications</h2>
<p>No new notifications</p>
{% endif %}


{% endif %}
    </main>

    <!-- ===== RIGHT PROFILE SIDEBAR ===== -->
    <aside class="profile-sidebar">
        <img src="{{ doctor.image.url }}" class="profile-pic">
        <a href="?page=edit_profile">Edit Profile</a>

        <h3>Dr. {{ doctor.name }}</h3>
        <p>{{ doctor.specialization }}</p>
        <p>{{ doctor.email }}</p>
        <div class="profile-info">
    <p><span>Bio:</span> {{ doctor.bio }}</p>
    <p><span>Qualification:</span> {{ doctor.qualification }}</p>
    <p><span>Hobbies:</span> {{ doctor.hobbies }}</p>
    </div>


        <hr>

        <a href="?page=help">Help</a>
        <a href="?page=contact">Contact Admin</a>
        <a href="?page=settings">Settings</a>
    </aside>

</div>

<!-- NOTIFICATION PANEL -->
<div id="notification-panel" class="notification-panel">
    <h4>Notifications</h4>
    <p>No new notifications</p>
</div>
  

<script>
document.addEventListener("DOMContentLoaded", function () {
    const flashMessages = document.getElementById("flash-messages");

    if (!flashMessages) return;

    // show fully first
    flashMessages.style.opacity = "1";

    // wait 5 seconds AFTER page load
    setTimeout(() => {
        flashMessages.style.transition = "opacity 0.6s ease";
        flashMessages.style.opacity = "0";

        setTimeout(() => {
            flashMessages.remove();
        }, 600);
    }, 5000);
});
</script>


</body>

</html>