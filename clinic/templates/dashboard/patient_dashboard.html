{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Patient Dashboard</title>
    <link rel="stylesheet" href="{% static 'css/patient_dashboard.css' %}">
</head>
<body>

<header class="patient-navbar">
    <div class="nav-left">
        <div class="nav-logo">
            <span class="pulse">~</span>
            <span class="medical">Medical</span>
            <span class="clinic">Clinic</span>
        </div>
        <div class="nav-subtitle">Exams & Diagnostics</div>
    </div>
    <div class="nav-center">
    <a href="{% url 'book_appointment' %}">ğŸ“… Book Appointments</a>
    <a href="{% url 'past_appointments' %}">ğŸ“…â³ Appointments</a>    
    </div>

    <div class="nav-right">
        <a href="{% url 'logout_patient' %}" class="logout-btn">ğŸšª Logout</a>
    </div>
</header>

<div class="patient-wrapper">

    <!-- LEFT PROFILE BAR -->
    <aside class="profile-bar">
        <div class="profile-header">
    <div class="profile-img-wrapper">
     {% if patient.image %}
    <img src="{{ patient.image.url }}" class="profile-img">
    {% else %}
     <img src="{% static 'images/default-user.png' %}" class="profile-img">
     {% endif %}
    </div>

    <h3 class="patient-name">{{ patient.name }}</h3>

    <div class="patient-meta">
        <span>ğŸ‚ {{ patient.age }} yrs</span>
        <span>âš§ {{ patient.gender }}</span>
    </div>

    <div class="patient-contact">
        ğŸ“ {{ patient.contact }}
     </div>
    </div>
        <a href="{% url 'patient_dashboard' %}">ğŸ  Dashboard</a>
        <a href="{% url 'notifications' %}">ğŸ”” Notifications</a>
        <a href="{% url 'medical_reports' %}">ğŸ“„ Medical Reports</a>
        <a href="{% url 'live_chat' %}">ğŸ’¬ Live Chat</a>
        <a href="{% url 'video_call' %}">ğŸ¥ Video Call</a>
        <a href="{% url 'medical_progress' %}">ğŸ“Š Health Progress</a>
        <a href="{% url 'medical_health' %}">ğŸ¥— Medical Health</a>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="patient-content">

        {% if messages %}
        <div class="patient-messages" id="flash-messages">
            {% for message in messages %}
                <div class="msg {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}


        {% if section == 'dashboard' %}
         <div class="content-card">
        <h2>Welcome {{ patient.name }} ğŸ‘‹</h2>  <br>
        <p>We Hope You Are In Good Health & Happyness</p>
        </div>

        {% elif section == 'book' %}
        <div class="content-card">
         <h2>Book Appointment</h2>

<!-- SEARCH BAR -->
        <form method="get" class="doctor-search">
     <input
        type="text"
        name="q"
        placeholder="Search doctor by name / specialization..."
        value="{{ query }}" >
    <button type="submit">ğŸ” Search</button>
        </form>

<!-- DOCTOR LIST -->
      <div class="doctor-grid">
     {% for d in doctors %}
     <div class="doctor-card">

        <div class="doctor-img">
            {% if d.image %}
                <img src="{{ d.image.url }}">
            {% else %}
                <img src="{% static 'images/default-user.png' %}">
            {% endif %}
        </div>

        <h3>{{ d.name }}</h3>
        <p class="spec">Doctor of {{ d.specialization }}</p>
        <p class="exp">ğŸ§  {{ d.experience }} Years Experience</p>
         <p class="tagline">
            {% if d.specialization == "Cardiologist" %}
                â¤ï¸ Doctor of Heart
            {% elif d.specialization == "Dermatologist" %}
                ğŸ§´ Skin Specialist
            {% elif d.specialization == "Orthopaedics" %}
                ğŸ¦´ Bone & Joint Expert
            {% else %}
                ğŸ©º Medical Specialist
            {% endif %}  </p>
        <p class="about">
            {{ d.about|truncatewords:18 }}
        </p>

        <a href="#" class="book-btn">ğŸ“… Book Now</a>

    </div>
     {% empty %}
        <p>No doctors found.</p>
     {% endfor %}
     </div>
     </div>





        {% elif section == 'past' %}
        <div class="content-card">
        <h2>Past Appointments</h2>
        <p>Your completed appointments will appear here.</p>
        </div>

        {% elif section == 'upcoming' %}
        <div class="content-card">
        <h2>Upcoming Appointments</h2>
        <p>Your scheduled appointments.</p>
        </div>

        {% elif section == 'reports' %}
        <div class="content-card">
        <h2>Medical Reports</h2>
        <p>Lab reports & prescriptions.</p>
        </div>

        {% elif section == 'chat' %}
        <div class="content-card">
        <h2>Live Chat</h2>
        <p>Chat with doctor.</p>
        </div>

        {% elif section == 'video' %}
        <div class="content-card">
        <h2>Live Video Call</h2>
        <p>Start video consultation.</p>
        </div>

        {% elif section == 'notifications' %}
        <div class="content-card">
        <h2>Notifications</h2>
        <p>Appointment alerts & reminders.</p>
        </div>

        {% elif section == 'progress' %}
        <div class="content-card">
        <h2>Medical Progress</h2>
        <p>Analytics of your health improvement.</p>
        </div>

        {% elif section == 'health' %}
        <div class="content-card">
        <h2>Medical Health</h2>
        <ul>
            <li>ğŸ¥— Healthy Diet Plans</li>
            <li>ğŸƒ Daily Exercise Routines</li>
            <li>ğŸ›Œ Sleep Recommendations</li>
        </ul>
        </div>
        {% endif %}

    </main>

</div>

  <script>
    setTimeout(function () {
        const messages = document.getElementById("flash-messages");
        if (messages) {
            messages.style.opacity = "0";
            setTimeout(() => messages.remove(), 500); // smooth fade
        }
    }, 5000); // 5 seconds
</script>
</body>
</html>
